


<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Dimensioning Rules Example &#8212; gFunctionLibrary 0.0.1 documentation</title>
    <link rel="stylesheet" href="_static/cloud.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noticia+Text:400,i,b,bi|Open+Sans:400,i,b,bi|Roboto+Mono:400,i,b,bi&display=swap" type="text/css" />
    
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>

    
    
     
        <script src="_static/jquery.cookie.js"></script>
    

    
     
        <script src="_static/cloud.base.js"></script>
    

    
     
        <script src="_static/cloud.js"></script>
    

    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Examples" href="examples.html" /> 
        <meta name="viewport" content="width=device-width, initial-scale=1"><script type="text/javascript">
var ga_enabled = !$.cookie('disable-ga');
if(ga_enabled){
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-53205480-2']);
  _gaq.push(['_setCookiePath', '/']);
  _gaq.push(['_setDetectFlash', false]);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
}
</script>
  </head><body>
    <div class="relbar-top">
        
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> &nbsp; &nbsp;</li>
        <li class="right" >
          <a href="examples.html" title="Examples"
             accesskey="P">previous</a> &nbsp; &nbsp;</li>
    <li><a href="index.html">gFunctionLibrary 0.0.1 documentation</a> &#187;</li>

          <li class="nav-item nav-item-1"><a href="examples.html" accesskey="U">Examples</a> &#187;</li> 
      </ul>
    </div>
    </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="dimensioning-rules-example">
<h1>Dimensioning Rules Example<a class="headerlink" href="#dimensioning-rules-example" title="Permalink to this headline">¶</a></h1>
<p>A 7x10 borefield is chosen to verify the dimensioning rules of Eskilson and pygfunction.</p>
<div class="section" id="compute-b-h-ratios">
<h2>Compute B/H Ratios<a class="headerlink" href="#compute-b-h-ratios" title="Permalink to this headline">¶</a></h2>
<p>To ensure that the g-function does scale with the dimensionless parameters, 5 g-functions varying different heights
are computed for borefields with uniform spacing of 5 and 8 meters. A table is created. The mean percentage errors
(computed with <a class="reference internal" href="statistics.html#gFunctionLibrary.statistics.mpe" title="gFunctionLibrary.statistics.mpe"><code class="xref py py-meth docutils literal notranslate"><span class="pre">gFunctionLibrary.statistics.mpe()</span></code></a>) are presented in the table below.</p>
<embed>
<style type="text/css">
.tg {margin: 0 auto;}
.tg  {border-collapse:collapse;border-spacing:0;}
.tg td{border-color:black;border-style:solid;border-width:1px;font-family:Arial, sans-serif;font-size:14px;
  overflow:hidden;padding:10px 5px;word-break:normal;}
.tg th{border-color:black;border-style:solid;border-width:1px;font-family:Arial, sans-serif;font-size:14px;
  font-weight:normal;overflow:hidden;padding:10px 5px;word-break:normal;}
.tg .tg-baqh{text-align:center;vertical-align:top}
.tg .tg-c3ow{border-color:inherit;text-align:center;vertical-align:top}
</style>
<body>
<table class="center, tg">
<caption>Mean percent errors for g-functions with the same B/H, and also computed using a separate B/H</caption>
<thead>
  <tr>
    <th class="tg-c3ow">B</th>
    <th class="tg-c3ow">H<sub>0</sub><br></th>
    <th class="tg-c3ow">H<sub>1</sub></th>
    <th class="tg-baqh">H<sub>2</sub></th>
    <th class="tg-baqh">H<sub>3</sub></th>
    <th class="tg-baqh">H<sub>4</sub></th>
  </tr>
</thead>
<tbody>
  <tr>
    <td class="tg-c3ow">5<br></td>
    <td class="tg-c3ow">96<br></td>
    <td class="tg-c3ow">48</td>
    <td class="tg-baqh">24</td>
    <td class="tg-baqh">12</td>
    <td class="tg-baqh">8</td>
  </tr>
  <tr>
    <td class="tg-c3ow">20</td>
    <td class="tg-c3ow">384</td>
    <td class="tg-c3ow">192</td>
    <td class="tg-baqh">96</td>
    <td class="tg-baqh">48</td>
    <td class="tg-baqh">32</td>
  </tr>
  <tr>
    <td class="tg-c3ow"><span style="font-weight:bold">MPE (%)</span></td>
    <td class="tg-c3ow">4.028e-05<br></td>
    <td class="tg-c3ow">-8.7e-06</td>
    <td class="tg-baqh">5.5e-04</td>
    <td class="tg-baqh">1.381e-02</td>
    <td class="tg-baqh">-4.759e-02</td>
  </tr>
</tbody>
</table>
</body>
</embed><p>The g-functions from the table above are plotted in the <a class="reference internal" href="#dr-fig-1"><span class="std std-numref">Fig. 1</span></a>. The g-functions computed for the
borefield with a uniform spacing, B=5m, are listed in the <cite>B/H library</cite> legend. This was done because
this is like what will be in the library. The g-functions computed using the uniform spacing, B=20m, are listed
in the <cite>B/H Computed</cite> legend. The g-functions which have the same <cite>B/H</cite> value for the 5m and 20m spacing fields
are computed with the same color. There are two additional g-function curves computed for a B/H=0.0625, which
will be used as reference for interpolation later on.</p>
<div class="figure align-center" id="dr-fig-1">
<img alt="_images/dimensioning_rules_figure_01.png" src="_images/dimensioning_rules_figure_01.png" />
<p class="caption"><span class="caption-number">Fig. 1 </span><span class="caption-text">g-Functions plotted with the same rb/H, D/H and borehole layout (7x10), but with
varied B/H values</span><a class="headerlink" href="#dr-fig-1" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="interpolation">
<h2>Interpolation<a class="headerlink" href="#interpolation" title="Permalink to this headline">¶</a></h2>
<p>New g-functions are computed that will specifically have a B/H value of 0.0625 to compare the interpolation
using the <cite>library</cite> g-function curves of 5m versus where the actual computed values fall.</p>
<embed>
<style type="text/css">
.tg  {border-collapse:collapse;border-spacing:0;}
.tg td{border-color:black;border-style:solid;border-width:1px;font-family:Arial, sans-serif;font-size:14px;
  overflow:hidden;padding:10px 5px;word-break:normal;}
.tg th{border-color:black;border-style:solid;border-width:1px;font-family:Arial, sans-serif;font-size:14px;
  font-weight:normal;overflow:hidden;padding:10px 5px;word-break:normal;}
.tg .tg-c3ow{border-color:inherit;text-align:center;vertical-align:top}
.tg .tg-7btt{border-color:inherit;font-weight:bold;text-align:center;vertical-align:top}
</style>
<table class="tg">
<caption>Mean percentage error of interpolation for a B/H=0.0625 using different interpolation methods</caption>
<thead>
  <tr>
    <th class="tg-c3ow"><span style="font-weight:bold">Interpolation Method</span></th>
    <th class="tg-7btt">MPE (%)</th>
  </tr>
</thead>
<tbody>
  <tr>
    <td class="tg-c3ow">linear</td>
    <td class="tg-c3ow"> -0.30</td>
  </tr>
  <tr>
    <td class="tg-c3ow">quadratic<br></td>
    <td class="tg-c3ow">-0.05<br></td>
  </tr>
  <tr>
    <td class="tg-c3ow">cubic</td>
    <td class="tg-c3ow">-0.02<br></td>
  </tr>
</tbody>
</table>
</embed><p>An interpolated g-function (using <cite>cubic interpolation</cite>) is now plotted on an updated <a class="reference internal" href="#dr-fig-2"><span class="std std-numref">Fig. 2</span></a>.</p>
<div class="figure align-center" id="dr-fig-2">
<img alt="_images/dimensioning_rules_figure_02.png" src="_images/dimensioning_rules_figure_02.png" />
<p class="caption"><span class="caption-number">Fig. 2 </span><span class="caption-text">An interpolated g-function curve of B/H=0.0625 is interpolated for using g-functions computed with
a uniform spacing of 5m and ranging heights</span><a class="headerlink" href="#dr-fig-2" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="source-code">
<h2>Source Code<a class="headerlink" href="#source-code" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># Jack C. Cook</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">**dimensioning_rules.py**</span>

<span class="sd">The following goals will be accomplished in this example:</span>
<span class="sd">    1) proof that g-functions vary based on ln(t/ts), B/H, D/H, and rb/H</span>
<span class="sd">    2) proof that interpolation over B/H is accurate</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">gFunctionLibrary</span> <span class="k">as</span> <span class="nn">gfl</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="c1"># Part 1) Prove that the g-functions vary based on ln(t/ts), B/H, D/H, and rb/H visually and mathematically</span>
    <span class="c1"># Part A) Collect and plot the g-functions for a library file for a 7x10 borefield where B=5</span>
    <span class="n">path_to_lib_files</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;files/lib/&#39;</span>  <span class="c1"># each of the files in here have g-functions like will be stored in lookup</span>
    <span class="n">bf_5m_lib</span> <span class="o">=</span> <span class="n">gfl</span><span class="o">.</span><span class="n">handle_contents</span><span class="o">.</span><span class="n">Borefield</span><span class="p">(</span><span class="n">gfl</span><span class="o">.</span><span class="n">fileio</span><span class="o">.</span><span class="n">js_r</span><span class="p">(</span><span class="n">path_to_lib_files</span> <span class="o">+</span> <span class="s1">&#39;7x10_B_5_nbh_70.json&#39;</span><span class="p">))</span>
    <span class="n">fig_1</span><span class="p">,</span> <span class="n">ax_1</span> <span class="o">=</span> <span class="n">bf_5m_lib</span><span class="o">.</span><span class="n">visualize_g_functions</span><span class="p">()</span>

    <span class="c1"># Part B) Collect the g-functions for the library file for a 7x10 borefield where B=20</span>
    <span class="c1">#         Determine the error when computing B/H values</span>
    <span class="n">bf_20m_lib</span> <span class="o">=</span> <span class="n">gfl</span><span class="o">.</span><span class="n">handle_contents</span><span class="o">.</span><span class="n">Borefield</span><span class="p">(</span><span class="n">gfl</span><span class="o">.</span><span class="n">fileio</span><span class="o">.</span><span class="n">js_r</span><span class="p">(</span><span class="n">path_to_lib_files</span> <span class="o">+</span> <span class="s1">&#39;7x10_B_20_nbh_70.json&#39;</span><span class="p">))</span>
    <span class="c1"># If Eskilson was right, and the dimensioning rules are accurate, then the following mean percent errors will be ~0</span>
    <span class="n">keys_5m</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">reversed</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">bf_5m_lib</span><span class="o">.</span><span class="n">g</span><span class="o">.</span><span class="n">keys</span><span class="p">())))</span>
    <span class="n">keys_5m</span> <span class="o">=</span> <span class="n">keys_5m</span><span class="p">[</span><span class="mi">2</span><span class="p">:]</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;The heights that will be used in the from the 5m library file:&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">keys_5m</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;The heights that will be used in the from the 20m library file:&#39;</span><span class="p">)</span>
    <span class="n">keys_20m</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">reversed</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">bf_20m_lib</span><span class="o">.</span><span class="n">g</span><span class="o">.</span><span class="n">keys</span><span class="p">())))</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">keys_20m</span><span class="p">)</span>

    <span class="n">mean_percent_errors</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">keys_5m</span><span class="p">)):</span>
        <span class="n">mean_percent_error</span> <span class="o">=</span> <span class="n">gfl</span><span class="o">.</span><span class="n">statistics</span><span class="o">.</span><span class="n">mpe</span><span class="p">(</span><span class="n">bf_5m_lib</span><span class="o">.</span><span class="n">g</span><span class="p">[</span><span class="n">keys_5m</span><span class="p">[</span><span class="n">i</span><span class="p">]],</span> <span class="n">bf_20m_lib</span><span class="o">.</span><span class="n">g</span><span class="p">[</span><span class="n">keys_20m</span><span class="p">[</span><span class="n">i</span><span class="p">]])</span>
        <span class="n">mean_percent_errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mean_percent_error</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Mean percent errors between g-functions&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">mean_percent_errors</span><span class="p">)</span>

    <span class="c1"># Part C) Plot the g-functions for the B=20 7x10 borefield</span>
    <span class="n">lines</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">key</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">keys_20m</span><span class="p">):</span>
        <span class="n">line</span><span class="p">,</span> <span class="o">=</span> <span class="n">ax_1</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">bf_20m_lib</span><span class="o">.</span><span class="n">log_time</span><span class="p">,</span> <span class="n">bf_20m_lib</span><span class="o">.</span><span class="n">g</span><span class="p">[</span><span class="n">key</span><span class="p">],</span> <span class="n">marker</span><span class="o">=</span><span class="s1">&#39;o&#39;</span><span class="p">,</span> <span class="n">ls</span><span class="o">=</span><span class="s1">&#39;None&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;C&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">2</span><span class="p">),</span>
                          <span class="n">markersize</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
                          <span class="n">label</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">bf_20m_lib</span><span class="o">.</span><span class="n">B</span><span class="p">))</span> <span class="o">+</span> <span class="s1">&#39;/&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">key</span><span class="p">))</span>
        <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>

    <span class="c1"># Part D) Plot a B/H of 0.0625 which is 8/128 and 5/8</span>
    <span class="n">path_to_computed</span> <span class="o">=</span> <span class="s1">&#39;files/computed/&#39;</span>
    <span class="n">bf_computed_5m</span> <span class="o">=</span> <span class="n">gfl</span><span class="o">.</span><span class="n">handle_contents</span><span class="o">.</span><span class="n">Borefield</span><span class="p">(</span><span class="n">gfl</span><span class="o">.</span><span class="n">fileio</span><span class="o">.</span><span class="n">js_r</span><span class="p">(</span><span class="n">path_to_computed</span> <span class="o">+</span> <span class="s1">&#39;7x10_B_5_nbh_70.json&#39;</span><span class="p">))</span>
    <span class="n">bf_computed_8m</span> <span class="o">=</span> <span class="n">gfl</span><span class="o">.</span><span class="n">handle_contents</span><span class="o">.</span><span class="n">Borefield</span><span class="p">(</span><span class="n">gfl</span><span class="o">.</span><span class="n">fileio</span><span class="o">.</span><span class="n">js_r</span><span class="p">(</span><span class="n">path_to_computed</span> <span class="o">+</span> <span class="s1">&#39;7x10_B_8_nbh_70.json&#39;</span><span class="p">))</span>
    <span class="n">line_7</span><span class="p">,</span> <span class="o">=</span> <span class="n">ax_1</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">bf_computed_5m</span><span class="o">.</span><span class="n">log_time</span><span class="p">,</span> <span class="n">bf_computed_5m</span><span class="o">.</span><span class="n">g</span><span class="p">[</span><span class="mi">80</span><span class="p">],</span> <span class="n">ls</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">)),</span>
                        <span class="n">label</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">bf_computed_5m</span><span class="o">.</span><span class="n">B</span><span class="p">))</span> <span class="o">+</span> <span class="s1">&#39;/&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="mi">80</span><span class="p">),</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">line_8</span><span class="p">,</span> <span class="o">=</span> <span class="n">ax_1</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">bf_computed_5m</span><span class="o">.</span><span class="n">log_time</span><span class="p">,</span> <span class="n">bf_computed_8m</span><span class="o">.</span><span class="n">g</span><span class="p">[</span><span class="mi">128</span><span class="p">],</span> <span class="n">ls</span><span class="o">=</span><span class="s1">&#39;dashed&#39;</span><span class="p">,</span>
                        <span class="n">label</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">bf_computed_5m</span><span class="o">.</span><span class="n">B</span><span class="p">))</span> <span class="o">+</span> <span class="s1">&#39;/&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="mi">128</span><span class="p">),</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line_7</span><span class="p">)</span>
    <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line_8</span><span class="p">)</span>
    <span class="n">second_legend</span> <span class="o">=</span> <span class="n">fig_1</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">handles</span><span class="o">=</span><span class="n">lines</span><span class="p">,</span>
                                 <span class="n">title</span><span class="o">=</span><span class="s1">&#39;B/H&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">Computed&#39;</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">1.005</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">))</span>
    <span class="n">fig_1</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">add_artist</span><span class="p">(</span><span class="n">second_legend</span><span class="p">)</span>

    <span class="c1"># Part E) Annotate the plot with the borehole layout and the D/H, rb/H</span>
    <span class="c1"># add in a sub axes plot with the borehole layout</span>
    <span class="n">sub_axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">axes</span><span class="p">([</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span> <span class="o">.</span><span class="mi">47</span><span class="p">,</span> <span class="o">.</span><span class="mi">5</span><span class="p">,</span> <span class="o">.</span><span class="mi">5</span><span class="p">])</span>
    <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">bf_5m_lib</span><span class="o">.</span><span class="n">bore_locations</span><span class="p">))</span>
    <span class="n">sub_axes</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
    <span class="n">sub_axes</span><span class="o">.</span><span class="n">set_aspect</span><span class="p">(</span><span class="s1">&#39;equal&#39;</span><span class="p">)</span>
    <span class="n">sub_axes</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;off&#39;</span><span class="p">)</span>
    <span class="c1"># annotate the layout with B spacings</span>
    <span class="n">sub_axes</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">xy</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">xytext</span><span class="o">=</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">arrowprops</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">arrowstyle</span><span class="o">=</span><span class="s1">&#39;&lt;-&gt;&#39;</span><span class="p">))</span>
    <span class="n">sub_axes</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">xy</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">xytext</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="n">arrowprops</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">arrowstyle</span><span class="o">=</span><span class="s1">&#39;&lt;-&gt;&#39;</span><span class="p">))</span>
    <span class="n">ax_1</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="o">-</span><span class="mf">7.8</span><span class="p">,</span> <span class="mi">53</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">)</span>
    <span class="n">ax_1</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="o">-</span><span class="mf">8.5</span><span class="p">,</span> <span class="mi">62</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">)</span>
    <span class="c1"># add in text for D/H and rb/H</span>
    <span class="n">ax_1</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="o">-</span><span class="mf">3.5</span><span class="p">,</span> <span class="mi">124</span><span class="p">,</span> <span class="s1">&#39;$\dfrac</span><span class="si">{r_b}{H}</span><span class="s1">$=0.0005&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>
    <span class="n">ax_1</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="o">-</span><span class="mf">3.5</span><span class="p">,</span> <span class="mi">111</span><span class="p">,</span> <span class="s1">&#39;$\dfrac</span><span class="si">{D}{H}</span><span class="s1">$=0.02083&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>

    <span class="n">fig_1</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;dimensioning_rules_figure_01.png&#39;</span><span class="p">)</span>

    <span class="c1"># Part F) Interpolate for a B/H = 0.0625</span>
    <span class="n">B</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">8.</span>
    <span class="n">H</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">128.</span>
    <span class="n">B_over_H</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">B</span> <span class="o">/</span> <span class="n">H</span>
    <span class="n">interpolation_kinds</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;linear&#39;</span><span class="p">,</span> <span class="s1">&#39;quadratic&#39;</span><span class="p">,</span> <span class="s1">&#39;cubic&#39;</span><span class="p">]</span>
    <span class="n">g_functions</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">kind</span> <span class="ow">in</span> <span class="n">interpolation_kinds</span><span class="p">:</span>
        <span class="n">g_function</span> <span class="o">=</span> <span class="n">bf_5m_lib</span><span class="o">.</span><span class="n">g_function_interpolation</span><span class="p">(</span><span class="n">B_over_H</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="n">kind</span><span class="p">)</span>
        <span class="n">bf_5m_lib</span><span class="o">.</span><span class="n">interpolation_table</span> <span class="o">=</span> <span class="p">{}</span>  <span class="c1"># this needs reset to recompute the table with a new kind</span>
        <span class="n">g_functions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">g_function</span><span class="p">)</span>
    <span class="n">mean_percentage_errors</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">g_functions</span><span class="p">)):</span>
        <span class="n">MPE</span> <span class="o">=</span> <span class="n">gfl</span><span class="o">.</span><span class="n">statistics</span><span class="o">.</span><span class="n">mpe</span><span class="p">(</span><span class="n">bf_computed_5m</span><span class="o">.</span><span class="n">g</span><span class="p">[</span><span class="mi">80</span><span class="p">],</span> <span class="n">g_functions</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
        <span class="n">mean_percentage_errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">MPE</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;The errors associated with different interpolation methods:&#39;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">interpolation_kinds</span><span class="p">)):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\t</span><span class="si">{0}</span><span class="s1">:</span><span class="se">\t</span><span class="si">{1:.2f}</span><span class="s1">%&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">interpolation_kinds</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">mean_percentage_errors</span><span class="p">[</span><span class="n">i</span><span class="p">]))</span>
    <span class="n">mean_percent_errors_abs</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">abs</span><span class="p">,</span> <span class="n">mean_percentage_errors</span><span class="p">))</span>
    <span class="n">idx</span> <span class="o">=</span> <span class="n">mean_percent_errors_abs</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">mean_percent_errors_abs</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">idx</span><span class="p">)</span>
    <span class="n">g_function</span> <span class="o">=</span> <span class="n">g_functions</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span>
    <span class="n">line_10</span><span class="p">,</span> <span class="o">=</span> <span class="n">ax_1</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">bf_5m_lib</span><span class="o">.</span><span class="n">log_time</span><span class="p">,</span> <span class="n">g_function</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s1">&#39;^&#39;</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;C9&#39;</span><span class="p">,</span> <span class="n">markersize</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">ls</span><span class="o">=</span><span class="s1">&#39;None&#39;</span><span class="p">,</span>
                         <span class="n">label</span><span class="o">=</span><span class="s1">&#39;0.0625&#39;</span><span class="p">)</span>

    <span class="n">third_legend</span> <span class="o">=</span> <span class="n">fig_1</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">handles</span><span class="o">=</span><span class="p">[</span><span class="n">line_10</span><span class="p">],</span>
                                <span class="n">title</span><span class="o">=</span><span class="s1">&#39;B/H&#39;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">Interpolated&#39;</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">1.005</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">))</span>
    <span class="n">fig_1</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">add_artist</span><span class="p">(</span><span class="n">third_legend</span><span class="p">)</span>

    <span class="n">fig_1</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;dimensioning_rules_figure_02.png&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="n">fig_1</span><span class="p">)</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><div class="sphinx-toc sphinxlocaltoc">
    <h3><a href="index.html">Page contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Dimensioning Rules Example</a><ul>
<li><a class="reference internal" href="#compute-b-h-ratios">Compute B/H Ratios</a></li>
<li><a class="reference internal" href="#interpolation">Interpolation</a></li>
<li><a class="reference internal" href="#source-code">Source Code</a></li>
</ul>
</li>
</ul>

  </div>
  <div class="sphinxprev">
    <h4>Previous page</h4>
    <p class="topless"><a href="examples.html"
                          title="Previous page">&larr; Examples</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/dimensioning_rules.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
    
    
        <div class="sidebar-toggle-group no-js">
            
            <button class="sidebar-toggle" id="sidebar-hide" title="Hide the sidebar menu">
                 «
                <span class="show-for-small">hide menu</span>
                
            </button>
            <button class="sidebar-toggle" id="sidebar-show" title="Show the sidebar menu">
                
                <span class="show-for-small">menu</span>
                <span class="hide-for-small">sidebar</span>
                 »
            </button>
        </div>
    
      <div class="clearer"></div>
    </div>
    <div class="relbar-bottom">
        
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> &nbsp; &nbsp;</li>
        <li class="right" >
          <a href="examples.html" title="Examples"
             >previous</a> &nbsp; &nbsp;</li>
    <li><a href="index.html">gFunctionLibrary 0.0.1 documentation</a> &#187;</li>

          <li class="nav-item nav-item-1"><a href="examples.html" >Examples</a> &#187;</li> 
      </ul>
    </div>
    </div>

    <div class="footer" role="contentinfo">
        &#169; Copyright 2021, Jack C. Cook.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.4.0.
    </div><script type="text/javascript">
    if(ga_enabled){
        document.write("<div class=\"footer\">This page uses <a href=\"http://analytics.google.com\">Google Analytics</a> to collect statistics. ");
        document.write("Click <button title=\"set cookie to disable analytics for this site\" class=\"link\" onclick=\"$.cookie('disable-ga', 'true', {expires: 3650, path: '/'}); window.location.reload(); return false; \">here</button> to disable analytics for this site.");
        document.write("</div>");
    }else{
        document.write("<div class=\"footer\">Google Analytics has been disabled. ");
        document.write("Click <button title=\"set cookie to re-enable analytics for this site\" class=\"link\" onclick=\"$.cookie('disable-ga', null, {path: '/'}); window.location.reload(); return false; \">here</button> to re-enable analytics for this site.");
    };
</script>
    <!-- cloud_sptheme 1.4 -->
  </body>
</html>